# DUTrack GOT-10k Enhanced V2 配置
# 显著性能提升的改进版本 V2
# 核心改进：时序模板融合 + 尺度感知跟踪 + 多假设选择 + 预测平滑
DATA:
  MAX_SAMPLE_INTERVAL: 200
  MEAN:
    - 0.485
    - 0.456
    - 0.406
  SEARCH:
    CENTER_JITTER: 3.5
    FACTOR: 4.0
    NUMBER: 2
    SCALE_JITTER: 0.5
    SIZE: 256
  STD:
    - 0.229
    - 0.224
    - 0.225
  TEMPLATE:
    CENTER_JITTER: 0
    FACTOR: 2.0
    NUMBER: 3
    SCALE_JITTER: 0
    SIZE: 128
  TRAIN:
    DATASETS_NAME:
      - GOT10K_train_full
    DATASETS_RATIO:
      - 1
    SAMPLE_PER_EPOCH: 30000
  VAL:
    DATASETS_NAME:
      - GOT10K_official_val
    DATASETS_RATIO:
      - 1
    SAMPLE_PER_EPOCH: 6000
MODEL:
  BACKBONE:
    ADD_CLS_TOKEN: true
    ATTN_TYPE: concat
    CE_KEEP_RATIO:
      - 0.7
      - 0.7
      - 0.7
    CE_LOC:
      - 3
      - 6
      - 9
    CE_TEMPLATE_RANGE: CTR_POINT
    STRIDE: 16
    TOP_K: 3
    TYPE: itpn_base
    BERT_DIR: "bert-base-uncased"
    BLIP_DIR: "Salesforce/blip-image-captioning-base"
  EXTRA_MERGER: false
  HEAD:
    NUM_CHANNELS: 256
    TYPE: CENTER
  PRETRAIN_FILE: DUTrack_Pretrained_256_got.pth.tar
  RETURN_INTER: false
TEST:
  EPOCH: 1
  MEMORY_THRESHOLD: 1000
  SEARCH_FACTOR: 4.0
  SEARCH_SIZE: 256
  TEMPLATE_FACTOR: 2.0
  TEMPLATE_NUMBER: 4
  TEMPLATE_SIZE: 128

  # ============ Enhanced V2 Parameters ============
  # 置信度阈值
  HIGH_CONF_THRESHOLD: 0.65 # 高置信度阈值，用于模板更新
  LOW_CONF_THRESHOLD: 0.35 # 低置信度阈值，触发扩大搜索
  FAILURE_THRESHOLD: 0.2 # 失败检测阈值

  # 自适应搜索区域
  MIN_SEARCH_FACTOR: 4.0 # 最小搜索因子（高置信度时）
  MAX_SEARCH_FACTOR: 5.5 # 最大搜索因子（失败恢复时）

  # 运动和尺度估计
  MOTION_WINDOW: 5 # 运动估计窗口大小

  # 平滑参数 (减少抖动，提升AUC)
  SCALE_SMOOTH_FACTOR: 0.4 # 尺度平滑系数
  POSITION_SMOOTH_FACTOR: 0.2 # 位置平滑系数

  # 模板更新策略
  TEMPLATE_UPDATE_INTERVAL: 5 # 模板更新最小间隔
  MAX_TEMPLATES: 15 # 最大模板数量

  # 多假设跟踪
  USE_MULTI_HYPOTHESIS: true # 启用多假设跟踪
  NUM_HYPOTHESES: 3 # 候选假设数量

  # 其他
  SAVE_SCORES: true
  PR_IOU_THRESHOLD: 0.5

TRAIN:
  AMP: false
  BACKBONE_MULTIPLIER: 0.1
  BATCH_SIZE: 8
  BBOX_TASK: true
  DROP_PATH_RATE: 0.1
  EPOCH: 30
  GIOU_WEIGHT: 2.0
  GRAD_CLIP_NORM: 0.1
  L1_WEIGHT: 5.0
  LR: 0.0001
  LR_DROP_EPOCH: 20
  NUM_WORKER: 10
  OPTIMIZER: ADAMW
  PRINT_INTERVAL: 50
  SCHEDULER:
    DECAY_RATE: 0.1
    TYPE: step
  VAL_EPOCH_INTERVAL: 2000000
  WEIGHT_DECAY: 0.0001
